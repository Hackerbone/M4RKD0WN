{"version":3,"sources":["components/Modal/Modal.jsx","pages/home/home.jsx","firebase.js","components/Navigation/navigation.jsx","pages/signin/signin.jsx","pages/signup/signup.jsx","pages/auth/auth.jsx","pages/dashboard/dashboard.jsx","pages/room/room.jsx","App.js","index.js"],"names":["MyVerticallyCenteredModal","props","volunteerProfile","useRef","handleCall","e","preventDefault","issue","name","target","value","firebase","database","ref","orderByChild","once","snapshot","forEach","child","val","profile","engaged","roomId","length","result","characters","charactersLength","i","charAt","Math","floor","random","makeid","console","log","roomRef","dateNow","Date","volunteer","createdAt","cient","cert","set","err","equalTo","then","childSnapshot","update","window","location","href","alert","catch","error","errorCode","code","errorMessage","message","Modal","size","aria-labelledby","centered","Header","closeButton","Title","id","Body","Form","onSubmit","Group","controlId","Label","Control","placeholder","Button","variant","type","Footer","onClick","onHide","Home","useState","modalShow","setModalShow","useSpring","from","transform","overflow","to","config","duration","useEffect","$","addClass","setTimeout","removeClass","section","style","className","show","apps","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","Navigation","logged","setLogged","Navbar","fixed","collapseOnSelect","expand","Brand","Toggle","aria-controls","Collapse","Nav","Text","userId","auth","currentUser","uid","signOut","Signin","setAuth","onAuthStateChanged","user","email","pwd","signInWithEmailAndPassword","userCredential","Row","Signup","password","createUserWithEmailAndPassword","usersRef","date","mobile","phone","certID","created","getTime","as","Col","Check","label","Auth","Container","fluid","md","Dashboard","userData","setUserData","getUserData","useCallback","on","tempRoomId","socket","io","connect","Room","roomData","setRoomData","volunteerCert","setVolunteerCert","me","setMe","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callerSignal","setCallerSignal","callAccepted","setCallAccepted","callEnded","setCallEnded","setName","myVideo","userVideo","connectionRef","navigator","mediaDevices","getUserMedia","video","audio","current","srcObject","match","params","slice","userSocketId","volunteerSocketId","data","signal","textAlign","color","playsInline","muted","autoPlay","width","remove","destroy","IconButton","aria-label","peer","Peer","initiator","trickle","emit","userToCall","signalData","callUser","fontSize","App","history","createBrowserHistory","exact","path","render","component","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.69a8184c.chunk.js","sourcesContent":["import React,{useRef} from 'react';\r\nimport { Form,Button,Modal } from 'react-bootstrap';\r\nimport firebase from 'firebase';\r\n\r\nfunction MyVerticallyCenteredModal(props) {\r\n\r\n    let volunteerProfile = useRef();\r\n\r\n    function makeid(length) {\r\n        var result           = '';\r\n        var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n        var charactersLength = characters.length;\r\n        for ( var i = 0; i < length; i++ ) {\r\n           result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n        }\r\n        return result;\r\n     }\r\n     \r\n     \r\n    const handleCall = (e) =>{\r\n        e.preventDefault();\r\n        let name = \"\";\r\n        let issue = \"\";\r\n        if(e.target.name.value === \"\"){\r\n            name = \"Anonymous\"\r\n        }else{\r\n            name = e.target.name.value;\r\n        }\r\n        issue = e.target.issue.value;\r\n\r\n        const userRef = firebase.database().ref('Users').orderByChild('profile/engaged');       \r\n        userRef.once('value', (snapshot)=>{\r\n              snapshot.forEach((child)=>{\r\n                \r\n                if(child.val().profile.engaged === 0){\r\n                    volunteerProfile = child.val();\r\n                }\r\n        }\r\n        \r\n        )\r\n\r\n\r\n        if(volunteerProfile.profile){\r\n\r\n        const roomId = makeid(6);\r\n        console.log(volunteerProfile)\r\n            const roomRef = firebase.database().ref('rooms').child(roomId);\r\n            const dateNow = new Date();\r\n            const profile = {\r\n                volunteer: volunteerProfile.profile.name,\r\n                createdAt: dateNow,\r\n                cient: name,\r\n                issue: issue,\r\n                cert: volunteerProfile.profile.cert \r\n\r\n            }\r\n    \r\n            roomRef.set(    \r\n                profile,\r\n                err => {\r\n                    if(err)\r\n                    console.log(err);\r\n                }\r\n            )\r\n\r\n            const ref = firebase.database().ref('Users').orderByChild(\"profile/cert\").equalTo(volunteerProfile.profile.cert);\r\n            ref.once(\"value\").then(function(snapshot) {\r\n                snapshot.forEach(function(childSnapshot) {\r\n            \r\n                  childSnapshot.ref.child('profile').update({\r\n                    \r\n                        \"engaged\": 1,\r\n                        \"tempRoomId\" : roomId\r\n                \r\n                  }).then(function() {\r\n                    window.location.href = '/room/' + roomId;\r\n  \r\n                });\r\n            \r\n                  // Cancel enumeration\r\n                  return true;\r\n              });\r\n            })\r\n          }\r\n          else{\r\n            alert(\"No available volunteers, please wait for some time.. \");\r\n          }\r\n        })\r\n          .catch((error) => {\r\n            let errorCode = error.code;\r\n            let errorMessage = error.message;\r\n            console.log(errorMessage, errorCode);\r\n        // })\r\n      });\r\n\r\n\r\n     \r\n\r\n    }\r\n\r\n    return (\r\n      <Modal\r\n        {...props}\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title id=\"contained-modal-title-vcenter\">\r\n            Enter details\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n        <Form onSubmit={(e) => handleCall(e)}>\r\n\r\n                <Form.Group controlId=\"formGridName\">\r\n                    <Form.Label>Name</Form.Label>\r\n                    <Form.Control name=\"name\" placeholder=\"Anonymous\" />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formGridIssue\">\r\n                    <Form.Label>What type of issue are you facing?</Form.Label>\r\n                    <Form.Control name=\"issue\" placeholder=\"Stress, Anxiety, ....\" />\r\n                </Form.Group>\r\n\r\n\r\n                <Button variant=\"success\" type=\"submit\">\r\n                    Join Room\r\n                </Button>\r\n            </Form>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button onClick={props.onHide}>Close</Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }\r\n\r\nexport default MyVerticallyCenteredModal;","import React, {useEffect,useState} from 'react';\r\nimport './home.scss';\r\nimport {useSpring, animated} from 'react-spring';\r\nimport $ from 'jquery';\r\nimport MyVerticallyCenteredModal from 'components/Modal/Modal';\r\n\r\n\r\nconst Home = () =>{\r\n    const [modalShow, setModalShow] = useState(false);\r\n    \r\n    const props = useSpring({\r\n        from : { transform: 'scale(1.5)', overflow: 'hidden'},\r\n        to : {transform: 'scale(1)',overflow: 'hidden',},\r\n        config: {duration: 500}\r\n    })\r\n\r\n    useEffect(() => {\r\n        $(\"#root\").addClass('overflow-none');\r\n\r\n        setTimeout(()=>{\r\n            $(\"#root\").removeClass('overflow-none');\r\n        },1000);\r\n        \r\n    }, [])\r\n    return(\r\n\r\n          <animated.section style={props} className=\"home\" >\r\n                <div className=\"bg-skew\"></div>\r\n                <div className=\"center-out\">\r\n                    <h2> <b>You are doing well! Lets converse </b></h2>  \r\n                    <h4>To get started click the button below</h4> \r\n                    \r\n                    <div className=\"call-button\" onClick={()=>setModalShow(!modalShow)}>\r\n                        <i className=\"fas fa-phone-alt\"></i>\r\n                    </div>\r\n                </div>\r\n                <MyVerticallyCenteredModal\r\n\r\n                show={modalShow}\r\n                onHide={() => setModalShow(false)}/>\r\n\r\n            </animated.section>\r\n\r\n            )\r\n\r\n}\r\n\r\nexport default Home;","import firebase from 'firebase/app';\r\nimport 'firebase/database';\r\nimport 'firebase/auth';\r\n\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyDnFMvqkULMTKi83QrG_QyietKYoiah6sI\",\r\n    authDomain: \"ek-database.firebaseapp.com\",\r\n    projectId: \"ek-database\",\r\n    storageBucket: \"ek-database.appspot.com\",\r\n    messagingSenderId: \"503059163051\",\r\n    appId: \"1:503059163051:web:2b85294379d4e4fadc94ee\"\r\n  };\r\n\r\nexport default !firebase.apps.length ? firebase.initializeApp(firebaseConfig) : firebase.app();","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport {Navbar,Nav,Button} from 'react-bootstrap';\r\nimport firebase from '../../firebase';\r\n\r\nconst Navigation = ({logged,setLogged}) =>{\r\n\r\n    return(\r\n    <Navbar fixed=\"top\" collapseOnSelect expand=\"sm\" variant=\"dark\">\r\n        <Link to=\"/\"><Navbar.Brand className=\"logo-text\">ek</Navbar.Brand></Link>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n            {!logged?\r\n            <Nav className=\"ml-auto\">\r\n                <Link to=\"/volunteer\"><Navbar.Text className=\"mx-3\">Volunteer here</Navbar.Text></Link>\r\n            </Nav>\r\n            :\r\n            <>\r\n            <Nav className=\"ml-auto\">\r\n                <Link to=\"/dashboard\"><Navbar.Text className=\"mx-3\">Dashboard</Navbar.Text></Link>\r\n            </Nav>\r\n            \r\n            <Nav>\r\n                <Button variant=\"danger\" onClick={()=>{\r\n                    const userId = firebase.auth().currentUser.uid;\r\n                    const userRef = firebase.database().ref('Users').child(userId + '/profile');\r\n                    userRef.update({\r\n                        engaged: 1\r\n                    })\r\n        \r\n                    firebase.auth().signOut()\r\n                    setLogged(false);\r\n                }}><Navbar.Text className=\"mx-3\">Logout</Navbar.Text></Button>\r\n            </Nav>\r\n            </>\r\n    }\r\n        </Navbar.Collapse>\r\n    </Navbar>\r\n    )\r\n}\r\n\r\nexport default Navigation;","import React from 'react';\r\nimport {Form, Button} from 'react-bootstrap';\r\nimport firebase from '../../firebase';\r\n// import { Link } from 'react-router-dom';\r\n\r\nimport './signin.scss'\r\nconst Signin = ({auth,setAuth,logged,setLogged}) => {\r\n\r\n    const handleSubmit=(e)=>{\r\n        e.preventDefault();\r\n        if(e.target.email.value=== \"\" || e.target.pwd.value===\"\"){\r\n            alert(\"Login details cannot be empty\");\r\n        }\r\n        else{\r\n            firebase.auth().signInWithEmailAndPassword(e.target.email.value,e.target.pwd.value)\r\n            .then((userCredential) => {\r\n                const userId = firebase.auth().currentUser.uid;\r\n                const userRef = firebase.database().ref('Users').child(userId + '/profile');\r\n                userRef.update({\r\n                    engaged: 0\r\n                })\r\n                alert(\"Login Successful\")\r\n                setLogged(true);\r\n                \r\n            })\r\n            .catch((error) => {\r\n                alert(error);\r\n            });\r\n        }\r\n        }\r\n\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n            if (user) {\r\n              setLogged(true);\r\n            } else {\r\n              setLogged(false);\r\n            }\r\n          });\r\n\r\n    return (\r\n        <section className=\"signin w-75\">\r\n            <Form className=\"form-neo\" onSubmit={handleSubmit}>\r\n                <Form.Row>\r\n                    <h3 className=\"py-2\">Signin | <span className=\"logo-text mx-0\">ek   </span></h3>\r\n                </Form.Row>\r\n\r\n                <Form.Group controlId=\"formGridEmail\">\r\n                    <Form.Label>Email</Form.Label>\r\n                    <Form.Control name=\"email\" type=\"email\" placeholder=\"Enter email\" />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formGridPassword\">\r\n                    <Form.Label>Password</Form.Label>\r\n                    <Form.Control name=\"pwd\" type=\"password\" placeholder=\"Password\" />\r\n                    </Form.Group>\r\n\r\n\r\n                <Button variant=\"primary\" type=\"submit\">\r\n                    Login\r\n                </Button>\r\n                <Form.Row>\r\n                    <span className=\"my-2\">Don't have an account ? <span className=\"text-primary\" onClick={()=> setAuth(!auth)}>Signup</span></span>\r\n                </Form.Row>\r\n            </Form>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Signin;\r\n","import React from 'react';\r\nimport {Form, Button, Col} from 'react-bootstrap';\r\n// import { Link } from 'react-router-dom';\r\nimport firebase from '../../firebase';\r\nimport './signup.scss'\r\nconst Signup = (props) => {\r\n\r\n    const handleSubmit=(e)=>{\r\n        e.preventDefault();\r\n            console.log(e.target.name.value);\r\n            const email = e.target.email.value;\r\n            const password = e.target.pwd.value;\r\n        \r\n            firebase.auth().createUserWithEmailAndPassword(email, password)\r\n            .then((userCredential) => {\r\n                let user = userCredential.user;\r\n               \r\n                const usersRef = firebase.database().ref('Users').child(user.uid);\r\n                const date = new Date();\r\n                const profile = {\r\n                    name : e.target.name.value,\r\n                    mobile: e.target.phone.value,\r\n                    cert: e.target.certID.value,\r\n                    created: date.getTime(),\r\n                    engaged: 0,\r\n                }\r\n\r\n                usersRef.set(\r\n                    {profile},\r\n                    err => {\r\n                        if(err)\r\n                        alert(err);\r\n                    }\r\n                )\r\n            })\r\n              .catch((error) => {\r\n                let errorCode = error.code;\r\n                let errorMessage = error.message;\r\n                alert(errorMessage, errorCode);\r\n              });\r\n\r\n       } \r\n    \r\n    firebase.auth().onAuthStateChanged((user) => {\r\n        if (user) {\r\n            props.setLogged(1);\r\n            // firebase.auth().signOut()\r\n        } \r\n      });\r\n\r\n\r\n    return (\r\n            <Form className=\"form-neo\" onSubmit={handleSubmit}>\r\n                <Form.Row>\r\n                    <h3 className=\"py-2\">Volunteer Signup | <span className=\"logo-text mx-0\">ek</span></h3>\r\n                </Form.Row>\r\n                    <Form.Row>\r\n                    <Form.Group as={Col} controlId=\"formGridName\">\r\n                    <Form.Label>Name</Form.Label>\r\n                    <Form.Control name=\"name\" placeholder=\"Enter fullname\" />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                    <Form.Label>Password</Form.Label>\r\n                    <Form.Control name=\"pwd\" type=\"password\" placeholder=\"Password\" />\r\n                    </Form.Group>\r\n                </Form.Row>\r\n\r\n                <Form.Group controlId=\"formGridEmail\">\r\n                    <Form.Label>Email</Form.Label>\r\n                    <Form.Control name=\"email\" type=\"email\" placeholder=\"Enter email\" />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formGridMobile\">\r\n                    <Form.Label>Phone Number</Form.Label>\r\n                    <Form.Control name=\"phone\" placeholder=\"+91 0000000000\"/>\r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formCertificationId\">\r\n                    <Form.Label>Certification ID <b>(   If not certified <a href=\"https://nhsvolunteerresponders.org.uk/volunteer-resources\"> click here </a>) </b> </Form.Label>\r\n                    <Form.Control name=\"certID\" placeholder=\"Certification ID\"/>\r\n                </Form.Group>\r\n\r\n                <Form.Group id=\"formGridCheckbox\">\r\n                    <Form.Check type=\"checkbox\" label=\"Agree to company's terms and conditions\" />\r\n                </Form.Group>\r\n\r\n\r\n                <Button variant=\"success\" type=\"submit\" >\r\n                    Signup\r\n                </Button>\r\n                <Form.Row>\r\n                    <span className=\"my-2\">Already have an account ? <span className=\"text-primary\" onClick={()=>props.setAuth(!props.auth)}>Login</span></span>\r\n                </Form.Row>\r\n            </Form>\r\n    );\r\n}\r\n\r\nexport default Signup;\r\n","import React, {useState} from 'react';\r\nimport {Container,Row,Col, Button} from 'react-bootstrap'\r\nimport Signin from '../signin/signin';\r\nimport Signup from '../signup/signup';\r\nimport './auth.scss';\r\nconst Auth = ({logged,setLogged}) => {\r\n\r\n    const [auth,setAuth] = useState(0);\r\n\r\n\r\n    return (\r\n        <Container className=\"auth\" fluid>\r\n            <Row className=\"w-100 mx-auto\">\r\n                <Col className=\"banner text-light d-md-flex d-none align-items-center\">\r\n                    <div className=\"banner-content\">\r\n                        <b><h1>Get Certified</h1></b>\r\n                        <p className=\"w-75 h5\">Working as a volunteer to help others requires a skill. Enroll in our programme to become a certified volunteer. </p>\r\n                        <Button href=\"https://nhsvolunteerresponders.org.uk/i-want-to-volunteer\">\r\n                        Enroll now\r\n                        </Button>\r\n                    </div>\r\n                </Col>\r\n\r\n                <Col md={5} className=\"d-flex justify-content-center align-items-center\" >\r\n                    {auth?\r\n                    <Signin auth={auth} setAuth={setAuth} logged={logged} setLogged={setLogged} />\r\n                    :\r\n                    <Signup auth={auth} setAuth={setAuth} logged={logged} setLogged={setLogged}/>\r\n                    }\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default Auth;\r\n","import React, {useState,useEffect,useCallback} from 'react';\r\nimport firebase from '../../firebase';\r\nimport {Container, Row, Col} from 'react-bootstrap';\r\n\r\n\r\nconst Dashboard = () => {\r\n    const [userData,setUserData] = useState(0);\r\n    \r\n    const getUserData = useCallback(() =>{\r\n        const user = firebase.auth().currentUser;\r\n        setUserData(user);\r\n        const userId = user.uid;\r\n        const userRef = firebase.database().ref('Users').child(userId + '/profile');\r\n        userRef.on('value', (snapshot)=>{\r\n            setUserData(snapshot.val());\r\n        })\r\n\r\n    },[setUserData]);\r\n\r\n    useEffect(() => {\r\n        getUserData();\r\n    }, [getUserData])\r\n\r\n    return (\r\n        <Container className=\"auth\" fluid>\r\n            <Row className=\"w-100 mx-auto\">\r\n                {/* <Col className=\"banner text-light d-md-flex d-none align-items-center\">\r\n                    <div className=\"banner-content\">\r\n                        <b><h1>Get Certified</h1></b>\r\n                        <p className=\"w-75 h5\">Working as a volunteer to help others requires a skill. Enroll in our programme to become a certified volunteer. </p>\r\n                        <Button onClick={()=> firebase.auth().signOut()}>\r\n                        Enroll now\r\n                        </Button>\r\n                    </div>\r\n                </Col> */}\r\n\r\n                <Col className=\"d-flex justify-content-center align-items-center flex-column\" >\r\n                    <h1>Welcome {userData.name} !</h1>\r\n                    <h3>{userData.cert}</h3>\r\n                    <h3>{userData.tempRoomId? window.location.href = '/room/' + userData.tempRoomId + 'v0lUn' : <></> }</h3>\r\n                    <h3>{userData.engaged? \"Engaged\" : \"Available\"} </h3>\r\n                \r\n                \r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n\r\n    );\r\n}\r\n\r\nexport default Dashboard;\r\n","import Button from \"@material-ui/core/Button\"\r\nimport IconButton from \"@material-ui/core/IconButton\"\r\n// import TextField from \"@material-ui/core/TextField\"\r\n// import AssignmentIcon from \"@material-ui/icons/Assignment\"\r\nimport PhoneIcon from \"@material-ui/icons/Phone\"\r\nimport React, { useEffect, useRef, useState } from \"react\"\r\n// import { CopyToClipboard } from \"react-copy-to-clipboard\"\r\nimport Peer from \"simple-peer\"\r\nimport io from \"socket.io-client\"\r\nimport './room.scss'\r\n// import { useLocation } from \"react-router-dom\";\r\nimport firebase from '../../firebase'\r\n\r\n\r\nconst socket = io.connect('https://ek-backend.herokuapp.com')\r\n\r\nconst Room = (props) => {\r\n    // const location = useLocation();\r\n    const [roomData,setRoomData] = useState(0);\r\n    const [volunteerCert,setVolunteerCert] = useState(0);\r\n    \r\n    const [ me, setMe ] = useState(\"\") //user\r\n\tconst [ stream, setStream ] = useState()\r\n\tconst [ receivingCall, setReceivingCall ] = useState(false)\r\n\tconst [ caller, setCaller ] = useState(\"\")\r\n\tconst [ callerSignal, setCallerSignal ] = useState()\r\n\tconst [ callAccepted, setCallAccepted ] = useState(false)\r\n\t// const [ idToCall, setIdToCall ] = useState(\"\") //volunteer\r\n\tconst [ callEnded, setCallEnded] = useState(false)\r\n\tconst [ name, setName ] = useState(\"\")\r\n\tconst myVideo = useRef()\r\n\tconst userVideo = useRef()\r\n\tconst connectionRef= useRef()\r\n\r\n    // location.volunteerProfile shows me the volunteer profile\r\n    console.log(props);\r\n\r\n    useEffect(() => {\r\n  \r\n\t\tnavigator.mediaDevices.getUserMedia({ video: true, audio: true }).then((stream) => {\r\n\t\t\tsetStream(stream)\r\n\t\t\t\tmyVideo.current.srcObject = stream\r\n\t\t})\r\n\r\n\tsocket.on(\"me\", (id) => {\r\n\t\t\tsetMe(id)\r\n            console.log(id);\r\n\r\n            const roomRef = firebase.database().ref('rooms').child(props.match.params.id.slice(0,6));\r\n            if(props.match.params.id.length === 6)\r\n           { \r\n               roomRef.update(    \r\n                {\r\n                    userSocketId: id\r\n                },\r\n                err => {\r\n                    if(err)\r\n                    console.log(err);\r\n                }\r\n            )\r\n        }\r\n        else{\r\n            roomRef.update(    \r\n                {\r\n                    volunteerSocketId: id\r\n                },\r\n                err => {\r\n                    if(err)\r\n                    console.log(err);\r\n                }\r\n            )\r\n        }\r\n            \r\n\r\n\t\t})\r\n\r\n\t\tsocket.on(\"callUser\", (data) => {\r\n\t\t\tsetReceivingCall(true)\r\n\t\t\tsetCaller(data.from)\r\n\t\t\tsetName(data.name)\r\n\t\t\tsetCallerSignal(data.signal)\r\n\t\t})\r\n\r\n        const roomRef = firebase.database().ref('rooms').child(props.match.params.id.slice(0,6));\r\n        roomRef.on('value', (snapshot)=>{\r\n            setRoomData(snapshot.val());\r\n            console.log(snapshot.val())\r\n            setVolunteerCert(snapshot.val().cert);\r\n        })\r\n\r\n\r\n\t}, [props.match.params.id])\r\n\r\n\tconst callUser = (id) => {\r\n\t\tconst peer = new Peer({\r\n\t\t\tinitiator: true,\r\n\t\t\ttrickle: false,\r\n\t\t\tstream: stream\r\n\t\t})\r\n\t\tpeer.on(\"signal\", (data) => {\r\n\t\t\tsocket.emit(\"callUser\", {\r\n\t\t\t\tuserToCall: id,\r\n\t\t\t\tsignalData: data,\r\n\t\t\t\tfrom: me,\r\n\t\t\t\tname: name\r\n\t\t\t})\r\n\t\t})\r\n\t\tpeer.on(\"stream\", (stream) => {\r\n\t\t\t\r\n\t\t\t\tuserVideo.current.srcObject = stream\r\n\t\t\t\r\n\t\t})\r\n\t\tsocket.on(\"callAccepted\", (signal) => {\r\n\t\t\tsetCallAccepted(true)\r\n\t\t\tpeer.signal(signal)\r\n\t\t})\r\n\r\n\t\tconnectionRef.current = peer\r\n\t}\r\n\r\n\tconst answerCall =() =>  {\r\n\t\tsetCallAccepted(true)\r\n\t\tconst peer = new Peer({\r\n\t\t\tinitiator: false,\r\n\t\t\ttrickle: false,\r\n\t\t\tstream: stream\r\n\t\t})\r\n\t\tpeer.on(\"signal\", (data) => {\r\n\t\t\tsocket.emit(\"answerCall\", { signal: data, to: caller })\r\n\t\t})\r\n\t\tpeer.on(\"stream\", (stream) => {\r\n\t\t\tuserVideo.current.srcObject = stream\r\n\t\t})\r\n\r\n\t\tpeer.signal(callerSignal)\r\n\t\tconnectionRef.current = peer\r\n\t}\r\n\r\n\tconst leaveCall = () => {\r\n\t\tsetCallEnded(true)\r\n        \r\n        if(props.match.params.id.length>6){\r\n        const roomRef = firebase.database().ref('rooms').child(props.match.params.id.slice(0,6));\r\n        roomRef.remove();\r\n        \r\n        console.log(\"==========\");\r\n        console.log(roomData);\r\n\r\n        \r\n        console.log(\"-----------\");\r\n        console.log(volunteerCert);\r\n        if(roomData.profile){\r\n        const uRef = firebase.database().ref('Users').orderByChild(\"profile/cert\").equalTo(volunteerCert);\r\n        uRef.child('tempRoomId').remove();\r\n\t\t}\r\n        else{\r\n            window.location.href = '/';\r\n        }\r\n    }\r\n    else{\r\n        window.location.href = '/';\r\n        \r\n    }\r\n        connectionRef.current.destroy()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<section className=\"room\">\r\n\t\t\t<h1 style={{ textAlign: \"center\", color: '#fff' }}>ek</h1>\r\n\t\t<div className=\"container\">\r\n\t\t\t<div className=\"video-container\">\r\n\t\t\t\t<div className=\"video\">\r\n\t\t\t\t\t{stream &&  <video playsInline muted ref={myVideo} autoPlay style={{ width: \"300px\" }} />}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"video\">\r\n\t\t\t\t\t{callAccepted && !callEnded ?\r\n\t\t\t\t\t<video playsInline ref={userVideo} autoPlay style={{ width: \"300px\"}} />:\r\n\t\t\t\t\tnull}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n            {roomData? console.log(roomData) : <></>}\r\n\t\t\t<div className=\"myId\">\r\n\t\t\t\t{/* <TextField\r\n\t\t\t\t\tid=\"filled-basic\"\r\n\t\t\t\t\tlabel=\"Name\"\r\n\t\t\t\t\tvariant=\"filled\"\r\n\t\t\t\t\tvalue={name}\r\n\t\t\t\t\tonChange={(e) => setName(e.target.value)}\r\n\t\t\t\t\tstyle={{ marginBottom: \"20px\" }}\r\n\t\t\t\t/> */}\r\n\t\t\t\t{/* <CopyToClipboard text={me} style={{ marginBottom: \"2rem\" }}>\r\n\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" startIcon={<AssignmentIcon fontSize=\"large\" />}>\r\n\t\t\t\t\t\tCopy ID\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</CopyToClipboard> */}\r\n\r\n\t\t\t\t{/* <TextField\r\n\t\t\t\t\tid=\"filled-basic\"\r\n\t\t\t\t\tlabel=\"ID to call\"\r\n\t\t\t\t\tvariant=\"filled\"\r\n\t\t\t\t\tvalue={idToCall}\r\n\t\t\t\t\tonChange={(e) => setIdToCall(e.target.value)}\r\n\t\t\t\t/> */}\r\n\t\t\t\t<div className=\"call-button\">\r\n\t\t\t\t\t{callAccepted && !callEnded ? (\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={leaveCall}>\r\n\t\t\t\t\t\t\tEnd Call\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t) : (\r\n\r\n                        <>\r\n                        {roomData.volunteerSocketId ? \r\n\t\t\t\t\t\t<IconButton color=\"primary\" aria-label=\"call\" onClick={() => callUser(roomData.volunteerSocketId)}>\r\n\t\t\t\t\t\t\t<PhoneIcon fontSize=\"large\" />\r\n\t\t\t\t\t\t</IconButton>\r\n                        :\r\n                        <></>}\r\n                    </>\r\n                )}\r\n\t\t\t\t\t{roomData.volunteerSocketId? roomData.volunteerSocketId : <></>}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t{receivingCall && !callAccepted ? (\r\n\t\t\t\t\t\t<div className=\"caller\">\r\n\t\t\t\t\t\t<h1 >{name} is calling...</h1>\r\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\r\n\t\t\t\t\t\t\tAnswer\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : null}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</section>\r\n\t\t\r\n    );\r\n}\r\n\r\nexport default Room;\r\n","import React, {useState} from 'react'\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport Home from 'pages/home/home';\n// import {Row,Container,Col,Button} from 'react-bootstrap';\nimport Navigation from 'components/Navigation/navigation';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'misc/_common.scss';\n// import Shop from 'pages/shop/shop';\n// import Signup from 'pages/signup/signup';\n// import Signin from 'pages/signin/signin';\nimport Auth from 'pages/auth/auth';\nimport Dashboard from 'pages/dashboard/dashboard';\nimport Room from 'pages/room/room';\n// import Signin from 'pages/signin/signin';\n// import Signup from 'pages/signup/signup';\nimport { createBrowserHistory } from 'history';\n\nfunction App() {\n  const [logged,setLogged] = useState(0);\n  // const [auth,setAuth] = useState(0);\n  const history = createBrowserHistory()\n    \n  return (\n    \n    <Router history= {history}>\n      <Navigation logged={logged} setLogged={setLogged}/>\n      \n      {!logged?\n      <Switch>\n       <Route exact path='/room/:id' render={(props) => {return ( <Room {...props} /> )}} />\n        \n        <Route exact path=\"/volunteer\">\n          <Auth logged={logged} setLogged={setLogged}/>\n        </Route> \n\n        <Route path=\"/\">\n          <Home/>\n        </Route>\n      </Switch>\n  :\n      <Switch>\n       <Route exact path='/room/:id' render={(props) => {return ( <Room {...props} /> )}} />\n        \n        <Route path='/dashboard' exact component={() => <Dashboard setLogged={setLogged }/>}/>\n        <Route path='/' render={() => <Redirect to=\"/dashboard\"/>}/>\n      </Switch>\n}\n</Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n  "],"sourceRoot":""}